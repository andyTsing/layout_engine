<!doctype html>
<html>
  <head>
    
  </head>
  <body>
    <canvas id="canvas" width=window.outerWidth height=window.outerHeight>
    <script src="/socket.io/socket.io.js"></script>
    <script src="http://code.jquery.com/jquery-1.11.1.js"></script>
    <script>
      var canvas = document.getElementById('canvas');
      var ctx = canvas.getContext('2d');
      
      var socket = io();
      window.addEventListener("keypress", dokeydown, false )
      function dokeydown(e) {
      socket.emit("key event", String.fromCharCode(event.keyCode));
      }

      socket.on("image", function(info) {
      if (info.image) {
      var img = new Image();
      img.src = 'data:image/jpeg;base64,' + info.buffer;
      ctx.drawImage(img, 0, 0);
      }
      })
      
      socket.on("window size request", function() {
      console.log("window size requested");
      socket.emit("window size", { 'width':window.outerWidth, 'height':window.outerHeight});
      }
      );
    </script>
  </body>
</html>
